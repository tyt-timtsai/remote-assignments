<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
  </head>
  <body>
    <!-- Sign up -->
    <h2>Sign up</h2>
    <form action="/signup" method="post" id="sign-up">
      <input type="email" name="email" id="sign-up-email" placeholder="Email..." required />
      <input
        type="password"
        name="password"
        id="sign-up-password"
        placeholder="Password..."
        required
      />
      <button type="submit">Sign up</button>
    </form>
    <div id="sign-up-error" class="error-msg"><%= locals.error_msg || null %></div>

    <!-- Sign in -->
    <h2>Sign in</h2>
    <form action="/signin" method="post" id="sign-in">
      <input type="email" name="email" id="sign-in-email" placeholder="Email..." required />
      <input
        type="password"
        name="password"
        id="sign-in-password"
        placeholder="Password..."
        required
      />
      <button type="submit">Sign in</button>
    </form>
    <div id="sign-in-error" class="error-msg"></div>

    <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> -->
    <!-- client js -->
    <script>
      const signUpError = document.getElementById('sign-up-error');
      const signInError = document.getElementById('sign-in-error');
      const email = document.getElementById('sign-up-email');
      const password = document.getElementById('sign-up-password');

      //Submit to Sign up
      const xhr = new XMLHttpRequest();
      const signUp = document.getElementById('sign-up');
      signUp.addEventListener('submit', () => {
        // xhr.onreadystatechange = function () {
        //   if (xhr.readyState === 4 && xhr.status === 200) {
        //     document.getElementById('sign-up-error').innerHTML = xhr.responseText;
        //     console.log(xhr.responseText);
        //     console.log(email.value);
        //     console.log(password.value);
        //   } else {
        //     console.log(xhr.responseText);
        //     console.log(email.value);
        //     console.log(password.value);
        //   }
        // };

        xhr.open('POST', '/signup');
        xhr.send();
      });

      // signUp.addEventListener('submit', () => {
      //   console.log(email.value);
      //   console.log(password.value);
      //   axios
      //     .post('/sign-up', {
      //       email: email.value,
      //       password: password.value,
      //     })
      //     .then((res) => console.log(res))
      //     .catch((err) => console.log(err));
      // });

      //Submit to Sign in
      // const signIn = document.getElementById('sign-in');
      // // const signUpRequest = new XMLHttpRequest();
      // signIn.addEventListener('submit', (e) => {
      //   xhr.onreadystatechange = function () {
      //     if (xhr.readyState === 4 && xhr.status === 200) {
      //       document.getElementById('sign-in-error').innerHTML = xhr.responseText;
      //       console.log(xhr.responseText);
      //     } else {
      //       console.log(xhr.responseText);
      //     }
      //   };
      //   xhr.open('POST', `/signin`);
      //   xhr.send();
      // });
    </script>
  </body>
</html>
